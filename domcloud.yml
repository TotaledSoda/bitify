# Build y deploy de React + Vite en DomCloud
source: clear
root: public_html
features:
  - nodejs

commands:
  # 1) Instalar deps y construir
  - npm ci
  - npm run build
  # 2) Publicar el build en la carpeta servida por Nginx
  - rm -rf public_html/*
  - cp -r dist/* public_html/

nginx:
  locations:
    # Archivos est√°ticos
    - match: ~ \.[^\/]+$
      try_files: $uri =404
    # Fallback para SPA (react-router-dom)
    - match: /
      try_files: $uri /index.html
